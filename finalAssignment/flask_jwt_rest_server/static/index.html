<!DOCTYPE html>
<html>
    <head> <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
	     <script src="https://code.jquery.com/jquery-3.6.0.js" 
		     integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	     <script src="/static/cis444.js"></script>
	     <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet'>
    </head>
<style>
 body {
      margin:0;
      background-color: white;
      font-family: "Veranda", Veranda, sans-serif;
      font-size: xx-large;
    }
 .login{
	 position: absolute;
      left:38%;
      top:20%;
      width:300px;
      overflow: hidden;
      display: center;
      margin-top:auto;
      margin-left: auto;
      margin-right: auto;
      background: white;
      border-color: #6EC5B8;
      padding: 80px;
      border-radius: 10px;
      font-size: 30px;
      font-family: "Veranda", Veranda, sans-serif;
      font-size: x-large;
      color: #6EC5B8;
    }
 .signup{
	
	 position: absolute;
      left:38%;
      top:20%;
      width:300px;
      overflow: hidden;
      display: center;
      margin-top:auto;
      margin-left: auto;
      margin-right: auto;
      background: white;
      border-color: #6EC5B8;
      padding: 80px;
      border-radius: 10px;
      font-size: 30px;
      font-family: "Veranda", Veranda, sans-serif;
      font-size: x-large;
      color: #6EC5B8;
    }
  .button{
      font-family: "Veranda", Veranda, sans-serif;
      font-size: medium;
      width:75px;
      height:25px;
      margin-left: auto;
      margin-right: auto;
      border-radius: 10px;
      display: block;
      transition-duration: 0.4s;
      background-color: #6EC5B8;
    }
    .button:hover{
      background-color: #6EC5B8;
      color:white;
    }

     ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: white;
      position: fixed;
      top: 0;
      width: 100%;
    }

    li {
      float: left;
    }

    li a {
      display: block;
      color: black;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: medium;
    }

    li a:hover:not(.active) {
      background-color: #6EC5B8;
    }

    .active {
      font-family: 'Pacifico';
      background-color: #6EC5B8;
      color:white;
    }

    #imageUpload
    {
      display: none;
    }

    #profileImage
    {
      cursor: pointer;
    }

    #output {
      margin-right: 500px;
      width: 250px;
      height: 250px;
      overflow: hidden;
      -webkit-border-radius: 50%;
      -moz-border-radius: 50%;
      -ms-border-radius: 50%;
      -o-border-radius: 50%;
      border-radius: 50%;
      border-color: #6EC5B8;
      border-style: groove;
    }

    #imageUpload
    {
      display: none;
    }

    #profileImage
    {
      cursor: pointer;
    }

    #profile-container {
      width: 150px;
      height: 150px;
      overflow: hidden;
      -webkit-border-radius: 50%;
      -moz-border-radius: 50%;
      -ms-border-radius: 50%;
      -o-border-radius: 50%;
      border-radius: 50%;
    }

    #profile-container img {
      width: 150px;
      height: 150px;
    }

    .form-control{
      vertical-align: center;
      margin-top: 75px;
      margin-left: 15px;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      border-color: #6EC5B8;
    }

 .hero-image {
  background: url(https://res.cloudinary.com/jerrick/image/upload/f_jpg,fl_progressive,q_auto,w_1024/rdklwar9b7ttjwrux4nk.jpg) no-repeat center; 
  background-size: cover;
  height: 1200px;
  position: relative;
}

.hero-text {
  font-family: 'Pacifico';font-size: 20px;
  text-align: center;
  position: absolute;
  top: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
}
  .edit{
      position: absolute;
      left:8%;
      top:20%;
      width:600px;
      height: 500px;
      overflow: hidden;
      display: center;
      margin-top:auto;
      margin-left: auto;
      margin-right: auto;
      background: white;
      padding: 80px;
      border-radius: 30px;
      font-size: 30px;
      text-align: -webkit-left;
      font-family: "Veranda", Veranda, sans-serif;

    }
    .edHead{
      text-align:center;
      font-size: 50px;
      font-weight:bold;
      margin-right: 25px;
      color: #6EC5B8;

    }
    .leftcol{
      margin:5px;
      width: 50px;
      float:left;
      color: #6EC5B8;
    }
    .rightCol{
      margin-right: 250px;
      width: 50px;
      float:right;
      color: #6EC5B8;
    }
    .editfoot{
      margin-bottom: 400px;
}
    .remove-edit-button{
      position: absolute;
      float:right;
      margin-left: 375px;
    }
    .add-edit-button{
      position:absolute;
      margin-left: 235px;
    }

    ::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }

    ::-webkit-scrollbar-track {
      background: #f5f5f5;
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      border-radius: 10px;
      background: #ccc;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #6EC5B8;
    }
     .log{
      position: absolute;
      left:8%;
      top:20%;
      width:600px;
      height: 500px;
      overflow: hidden;
      display: center;
      margin-top:auto;
      margin-left: auto;
      margin-right: auto;
      background: white;
      padding: 80px;
      border-radius: 30px;
      font-size: 30px;
      text-align: -webkit-left;
      font-family: "Veranda", Veranda, sans-serif;

    }
    .logHead{
      text-align:center;
      font-size: 50px;
      font-weight:bold;
      margin-right: 25px;
      color: #6EC5B8;

    }
    .reportTable{
      text-align:center;
      position: absolute;
      left:50%;
      top:50%;
      transform:translate(-50%, 0%);
      width:550px;
      overflow: hidden;
      display: center top;
      margin-top:auto;
      margin-left: auto;
      margin-right: auto;
      background: white;
      padding: 80px;
      border-radius: 10px;
      font-size: 30px;



</style>
    <body>
	 
			    <div class="hero-image" id = "main">
  				<div class="hero-text">
    				  <h1 style="font-size:50px">Welcome to PetMe+</h1>
    				  <h3>A place for you and your best friend</h3>
  				</div>
			</div>
		  
     <div class="login" id = login>
	     <div>
                 <label for="logintext">Welcome Back, Login!</label><br><br>
                       <label for="email">Email:</label><br>
                             <input type="text" id="loginEmail" name="loginEmail" value=""><br>
                                <label for="password">Password:</label><br>
                                       <input type="password" id="loginPassword" name="loginPassword" value=""><br><br>
                                       <input type="submit" value="Login" class="button" onclick = "login(); return false"><br>
	     </div>
        </div>
	    <div class = "signup" id = signup>
		    <div>
			<label for="signupForm">Signup!</label><br><br>
                       		<label for="email">E-mail:</label><br>
                             		<input type="text" id="signupEmail" name="signupEmail" value=""><br>
                                <label for="password">Password:</label><br>
                                       <input type="password" id="signupPassword" name="signupPassword" value=""><br>
				<label for="name">Name:</label><br>
				<input type="text" id="newUserName" name="newUserName" value=""><br>
				<label for="city">City:</label><br>
                                       <input type="text" id="signupCity" name="signupCity" value=""><br>
				<label for="state">State:</label><br>
                                       <input type="text" id="signupState" name="signupState" value=""><br><br>
                                       <input type="submit" value="Sign Up" class="button" onclick= "signup(); return false"><br>


		    </div>
	    </div>
	    <div>
		    <div class ="userdash" id="dashboard">
			<input type ="file" accept="image/*" onchange="loadfile(event)">
			<img id="userphoto"/><br><br>
		<input type="file" accept="image/*" onchange="loadFile(event)">
          <img id="output"/><br><br>
			


	    </div>
	    <div >
  <div class ="edit" id = "petEditor">
    <div >
      <div>
        <div class = edHead>
          <label id = edit-header for="Pet">Add Pet</label><br><br>
        </div>
      </div>
    </div>
    <div class = leftcol>
      <div class = petInfo>
        <form >
          <label id=addNameEditor for="Select">Name:</label>
          <input type="text" id="petName" name="petName"><br><br>
          <label id=addAgeEditor for="Select">Age:</label>
          <input type="text" id="petAge" name="petAge"><br><br>
          <label id=addBreedEditor for="Select">Breed:</label>
          <input type="text" id="breed" name="breed"><br><br><br>
        </form>
      </div>
    </div>
    <div>
      <div class = editfoot id="settingedit">
        <div class = add-edit-button><input type="submit" value="add" class="button" id = addEdit onclick= "addPet();"></div>
      </div>
    </div>
  </div>
</div>
            <div >
  <div class ="log" id = "petLog">
    <div >
      <div>
        <div class = logHead>
          <label id = log-header for="logs">Add Pet Log</label><br><br>
        </div>
      </div>
    </div>
    <div>
      <div class = petInfo>
        <form >
          <label id=addNameLog for="Select">Name:</label>
          <input type="text" id="petLogName" name="petLogName"><br><br>
          <label id=petLogType for="Select">Log Type (food, medicine, or exercise)</label>
          <input type="text" id="logType" name="logType"><br><br>
	  <textarea class = "text-area" type="text" id="comments" name="comments" required
              minlength="0" maxlength="500" size="500"></textarea><br>
        </form>
      </div>
    </div>
    <div>
      <div class = editfoot id="Logedit">
        <div class = addLogButton><input type="submit" value="add" class="button" id = addEdit onclick= "addPetLog();"></div>
      </div>
    </div>
  </div>
</div>
 <div >
  <div class ="reportTable" id = "report">
    <div >
      <div>
        <div class = reportHead>
		<label id = report-header for="report">Pet Report</label><br><br>
        </div>
      </div>
    </div>
    <div>
 	<table id="rep_table">
            <tbody>
                <tr>
                  <td>Pet Name</td>
                  <td>Log Type</td>
                  <td>Comments</td>
                </tr>
            </tbody>
       </table>
    <div>
      <div class = repfoot id="reportFoot">
        <div class = closeReport><input type="submit" value="close" class="button" id = addEdit onclick= "$('#report').hide();"></div>
      </div>
    </div>
  </div>
</div>



	    </div>
	    <div>
		<ul class="sidenav">
  		<li onclick="goHome()"><a class="active" href="#home">PetMe+</a></li>
  		<li id = "PL2" onclick="showPetLog();"><a href="#pet-log">Pet Log</a></li>
  		<li id = "gallery" onclick="showGallery()"><a href="#photos">Photos</a></li>
  		<li id = "pet-report2" onclick="displayReport()"><a href="#report">Pet Report</a></li>
  		<li id = editp onclick="showPetEdit();"><a href="#editpet">Add Pets</a></li>
  		<li onclick="window.open('/static/dogpark-api-test.html');"><a href="#park">Find A Park</a></li>
  		<li onclick="window.open('/static/groomer-api-test.html');"><a href="#groomer">Find A Groomer</a></li>
  		<li onclick="goToChewy()"><a href="#chewy">Chewy.com</a></li>
  		<li style ="float:right"onclick="goHome()"><a href="#signout">Sign out</a></li>
		<li onclick="$('#login').show();" style="float:right"><a href="#login">Login</a></li>
		<li onclick="$('#signup').show();" style="float:right"><a href="#signup">Sign up</a></li>

		</ul>
   	</div>
    </body>
	<script>
		
		$('#main').show();
		$('#login').hide();
		$('#signup').hide();
		$('#dashboard').hide();
		$('#petEditor').hide();
		$('#petLog').hide();
		$('#report').hide();
		var loadFile = function(event) {
    		var reader = new FileReader();
    		reader.onload = function(){
      		var output = document.getElementById('output');
      		output.src = reader.result;
    		};
    		reader.readAsDataURL(event.target.files[0]);
  		};
		//function that allows an existing user to login
               function login(){
                       $('#signup').hide();
                       $('#dashboard').hide();
                       $('#petEditor').hide();
		       $('#report').hide();
			$.post("/open_api/login", { "loginEmail":$('#loginEmail').val(), "loginPassword":$('#loginPassword').val()},
                       		function(data, textStatus) {
					//this gets called when browser receives response from server
					console.log(data.token);
					//Set global JWT
					jwt = data.token;

					//make secure call with the jwt
					get_dash();
				}, "json").fail( function(response) {
					//this gets called if the server throws an error
					console.log("error");
					console.log(response);
				});
			return false;
		}

		//function that sign's up a new user
		function signup(){
			$('#login').hide();
                       $('#dashboard').hide();
                       $('#petEditor').hide();
			$('#report').hide();

                        $.post("/open_api/signup", { "signupEmail":$('#signupEmail').val(), "signupPassword":$('#signupPassword').val(), "newUserName":$('#newUserName').val(), "signupCity":$('#signupCity').val(), "signupState":$('#signupState').val()},
                                function(data, textStatus) {
                                        //this gets called when browser receives response from server
                                        console.log(data.token);
                                        //Set global JWT
                                        jwt = data.token;

                                        //make secure call with the jwt
                                        get_dash();
                                }, "json").fail( function(response) {
                                        //this gets called if the server throws an error
                                        console.log("error");
                                        console.log(response);
                                });
                        return false;
                }
		
		//function that displays the user profile upon successful login
		function get_dash(){
			$('#login').hide();
                	$('#signup').hide();
			$('#petEditor').hide();
			$('#main').hide();
			$('#report').hide();
		
			 //make secure call with the jwt
			secure_get_with_token("/secure_api/get_dash", {} , function(data){
					console.log("got user dashboard"); 
					console.log(data); 
					$('#dashboard').show();
					},
                                                function(err){ console.log(err) });
		}

		//function that brings user to chewy.com on click
		function goToChewy(){
    			window.open('https://www.chewy.com/');
  		}

		//function that brings user back to homepage
		function goHome(){
			$('#login').hide();
                        $('#signup').hide();
                        $('#petEditor').hide();
			$('#dashboard').hide();
			$('#main').show();
			$('#report').hide();
			$('#petLog').hide();
		}
		

 		//function for user to choose avatar from local filesystem
  		$("#image").change(function(){
    		readURL(this);
    		//other uploading process [server side by ajax and form-data ]
  		});

  		function readURL(input) {
    		if (input.files && input.files[0]) {
      		var reader = new FileReader();

      		reader.onload = function (e) {
        	$('#profile').attr('src', e.target.result);
      		}

      		reader.readAsDataURL(input.files[0]);
    		}
  	}


		//function that shows pet editor
		function showPetEdit(){
			$('#petEditor').show();
                        $('#dashboard').show();
			$('#login').hide();
                        $('#signup').hide();
			$('#main').hide();
			$('#report').hide();


		}
		//function to add a pet
		function addPet(){
			console.log($('#petName').val());
			console.log($('#petAge').val());
		        console.log($('#breed').val());
 			console.log($('#output').val());
	
			secure_post_with_token("/secure_api/add_pet", {"petname" : $('#petName').val(), "age":$('#petAge').val(), "breed":$('#breed').val()} ,
				function(data){
					console.log("added pet");
					console.log(data)
					$('#petEditor').hide();
                        		$('#dashboard').show();
				},
                                                function(err){ console.log(err) });

		}

		//function that shows the pet log
		function showPetLog(){
			$('#petLog').show();
                        $('#dashboard').show();
                        $('#login').hide();
                        $('#signup').hide();
                        $('#main').hide();
			$('#petEditor').hide();
			$('#report').hide();


		}

		//function to add pet log
		function addPetLog(){
			console.log($('#petLogName').val());
                        console.log($('#logType').val());
             		console.log($('#comments').val());


                        secure_post_with_token("/secure_api/add_pet_log", {"petLogName" : $('#petLogName').val(), "logType":$('#logType').val(), "comments":$('#comments').val()} ,
                                function(data){
                                        console.log("added pet Log");
                                        console.log(data)
                                        $('#petLog').hide();
                                        $('#dashboard').show();
                                },
                                                function(err){ console.log(err) });
	

		}

		//function that displays pet report
		function displayReport(){
			$('#login').hide();
                        $('#signup').hide();
                        $('#petEditor').hide();
                        $('#main').hide();
			$('#petLog').hide();
			$('#dashboard').show();

                         //make secure call with the jwt
                        secure_get_with_token("/secure_api/pet_report", {} , 
				function(data){
                                     console.log("got pet report");
                                     console.log(data);
					table = document.getElementById("rep_table");

                                        for(var i = 0; i < Object.keys(data.data.logs).length; i++){
				         	console.log("inside loop");
                                               row = table.insertRow(i+1);
                                               cell1 = row.insertCell(0);
                                               cell2= row.insertCell(1);
					       cell3=row.insertCell(2);	
                                               cell1.innerHTML = data.data.logs[i].name;
                                               cell2.innerHTML = data.data.logs[i].type;
					       cell3.innerHTML = data.data.logs[i].comment;			
                                        }

                                        $('#report').show();
                                        },
                                                function(err){ console.log(err) });
                }


		

		
	</script>
</html>


