<!DOCTYPE html>
<html>
    <head>
	     <script src="https://code.jquery.com/jquery-3.6.0.js" 
		     integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	     <script src="/static/cis444.js"></script>
    </head>
<style>
 body {
      margin:0;
      background-color: white;
      font-family: "Veranda", Veranda, sans-serif;
      font-size: xx-large;
    }
 .login{
	 position: absolute;
      left:30%;
      top:20%;
      width:500px;
      overflow: hidden;
      display: center;
      margin-top:auto;
      margin-left: auto;
      margin-right: auto;
      background: white;
      border-color: slategray;
      border-style: groove;
      padding: 80px;
      border-radius: 30px;
      font-size: 30px;
      font-family: "Veranda", Veranda, sans-serif;
      font-size: xx-large;
      color: #6EC5B8;
    }
 .signup{
	 position: absolute;
      left:30%;
      top:20%;
      width:500px;
      overflow: hidden;
      display: center;
      margin-top:auto;
      margin-left: auto;
      margin-right: auto;
      background: white;
      border-color: slategray;
      border-style: groove;
      padding: 80px;
      border-radius: 30px;
      font-size: 30px;
      font-family: "Veranda", Veranda, sans-serif;
      font-size: xx-large;
      color: #6EC5B8;
    }
  .button{
      font-family: "Veranda", Veranda, sans-serif;
      font-size: larger;
      width:120px;
      height:50px;
      margin-left: auto;
      margin-right: auto;
      border-radius: 10px;
      display: block;
      transition-duration: 0.4s;
      background-color: #6EC5B8;
    }
    .button:hover{
      background-color: #6EC5B8;
      color:white;
    }

     ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: white;
      position: fixed;
      top: 0;
      width: 100%;
    }

    li {
      float: left;
    }

    li a {
      display: block;
      color: black;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: medium;
    }

    li a:hover:not(.active) {
      background-color: #6EC5B8;
    }

    .active {
      background-color: #6EC5B8;
    }
    #loginimg{
	background-image: url('https://startuppup.com/wp-content/uploads/2021/02/dog-group-3.jpg');

    }

    .usersettings{
    position: absolute;
    left:30%;
    top:20%;
    width:600px;
    height: 500px;
    overflow: hidden;
    display: center;
    margin-top:auto;
    margin-left: auto;
    margin-right: auto;
    background: white;
    border-color: slategray;
    border-style: groove;
    padding: 80px;
    border-radius: 30px;
    font-size: 30px;
    text-align: -webkit-left;
    font-family: "Veranda", Veranda, sans-serif;
  }
    #imageUpload
    {
      display: none;
    }

    #profileImage
    {
      cursor: pointer;
    }

    #output {
      margin-right: 500px;
      width: 250px;
      height: 250px;
      overflow: hidden;
      -webkit-border-radius: 50%;
      -moz-border-radius: 50%;
      -ms-border-radius: 50%;
      -o-border-radius: 50%;
      border-radius: 50%;
      border-color: #6EC5B8;
      border-style: groove;
    }

    #imageUpload
    {
      display: none;
    }

    #profileImage
    {
      cursor: pointer;
    }

    #profile-container {
      width: 150px;
      height: 150px;
      overflow: hidden;
      -webkit-border-radius: 50%;
      -moz-border-radius: 50%;
      -ms-border-radius: 50%;
      -o-border-radius: 50%;
      border-radius: 50%;
    }

    #profile-container img {
      width: 150px;
      height: 150px;
    }

    .form-control{
      vertical-align: center;
      margin-top: 75px;
      margin-left: 15px;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      border-color: #6EC5B8;
    }

</style>
    <body>
	    <div id = "loginimg"></div>
     <div class="login" id = login>
	     <div>
                 <label for="logintext">Welcome Back, Login!</label><br><br>
                       <label for="email">Email:</label><br>
                             <input type="text" id="loginEmail" name="loginEmail" value=""><br>
                                <label for="password">Password:</label><br>
                                       <input type="password" id="loginPassword" name="loginPassword" value=""><br><br>
                                       <input type="submit" value="Login" class="button" onclick = "login(); return false"><br>
	     </div>
        </div>
	    <div class = "signup" id = signup>
		    <div>
			<label for="signupForm">Signup!</label><br><br>
                       		<label for="email">E-mail:</label><br>
                             		<input type="text" id="signupEmail" name="signupEmail" value=""><br>
                                <label for="password">Password:</label><br>
                                       <input type="password" id="signupPassword" name="signupPassword" value=""><br>
				<label for="name">Name:</label><br>
				<input type="text" id="newUserName" name="newUserName" value=""><br>
				<label for="city">City:</label><br>
                                       <input type="text" id="signupCity" name="signupCity" value=""><br>
				<label for="state">State:</label><br>
                                       <input type="text" id="signupState" name="signupState" value=""><br><br>
                                       <input type="submit" value="Sign Up" class="button" onclick= "signup(); return false">
				<label for"or" value="or"><br>
				       <input type="submit" value="Login" class="button" onclick = "login(); return false"><br>


		    </div>
	    </div>
	    <div>
		    <div class =userdash id=dashboard>

		    </div>
	    </div>
	    <div>
  		<div class = usersettings id="edituser">
    		<div >
      		   <div>	
        		<div class = edHead >
          			<label id = setting-header for="settings">Settings</label><br><br>
        		</div>
        	   	    <div class = rightCol>
          			<input type="file" accept="image/*" onchange="loadFile(event)">
          			<img id="useroutput"/><br><br>
        		    </div>
      			</div>
    		  </div>
    		<div class = leftcol>
                  <div class = userInfo>
                      <form >
          		<label id=addNameuser for="Select">Name:</label>
          		<input type="text" id="adduserName" name="Uname"><br><br>
          		<label id=addAgeUser for="Select">Age:</label>
          		<input type="text" id="adduserAge" name="UAge"><br><br>
        	    </form>
      		</div>
    	     </div>
    	<div>
      	<div class = editfoot>
        <div class = save-edit-button><input type="submit" value="save" class="button" id = saveuser onclick= "submitForm(); return false"></div>
        <div class = add-edit-button><input type="submit" value="add" class="button" id = adduser onclick= "submitForm(); return false"></div>
        <div class = remove-edit-button><input type="submit" value="delete" class="button" id = removeuser onclick= "submitForm(); return false"></div>
      </div>
    </div>
  </div>
</div>
	    <div>
		<ul class="sidenav">
  		<li onclick="goHome()"><a class="active" href="#home">PetMe+</a></li>
  		<li id = "PL2" onclick="showPetLog()"><a href="#pet-log">Pet Log</a></li>
  		<li id = "gallery" onclick="showGallery()"><a href="#photos">Photos</a></li>
  		<li id = "pet-report2" onclick="displayReport()"><a href="#report">Pet Report</a></li>
  		<li id = editp onclick="changePets()"><a href="#editpet">Edit Pets</a></li>
  		<li><a href="#park">Find A Park</a></li>
  		<li onclick="findAgroomer()"><a href="#groomer">Find A Groomer</a></li>
  		<li onclick="goToChewy()"><a href="#chewy">Chewy.com</a></li>
  		<li style="float:right"><a href="#signout">Sign out</a></li>
  		<li onclick="$('#edituser').show();" style="float:right"><a href="#settings">Settings</a></li>
		<li onclick="$('#login').show();" style="float:right"><a href="#login">Login</a></li>
		<li onclick="$('#signup').show();" style="float:right"><a href="#signup">Sign up</a></li>

		</ul>
   	</div>
    </body>
	<script>

		$('#login').hide();
		$('#signup').hide();
		$('#dashboard').hide();
		$('#edituser').hide()
		//function that allows an existing user to login
               function login(){
			$.post("/open_api/login", { "loginEmail":$('#loginEmail').val(), "loginPassword":$('#loginPassword').val()},
                       		function(data, textStatus) {
					//this gets called when browser receives response from server
					console.log(data.token);
					//Set global JWT
					jwt = data.token;

					//make secure call with the jwt
					get_dash();
				}, "json").fail( function(response) {
					//this gets called if the server throws an error
					console.log("error");
					console.log(response);
				});
			return false;
		}

		//function that sign's up a new user
		function signup(){
                        $.post("/open_api/signup", { "signupEmail":$('#signupEmail').val(), "signupPassword":$('#signupPassword').val(), "newUserName":$('#newUserName').val(), "signupCity":$('#signupCity').val(), "signupState":$('#signupState').val()},
                                function(data, textStatus) {
                                        //this gets called when browser receives response from server
                                        console.log(data.token);
                                        //Set global JWT
                                        jwt = data.token;

                                        //make secure call with the jwt
                                        get_dash();
                                }, "json").fail( function(response) {
                                        //this gets called if the server throws an error
                                        console.log("error");
                                        console.log(response);
                                });
                        return false;
                }
		
		//function that displays the user profile upon successful login
		function get_dash(){
			$('#login').hide();
                	$('#signup').hide();
		
			 //make secure call with the jwt
			secure_get_with_token("/secure_api/get_dash", {} , function(data){
					console.log("got user dashboard"); 
					console.log(data); 
					$('#dashboard').show();
					},
                                                function(err){ console.log(err) });
		}

		//function that brings user to chewy.com on click
		function goToChewy(){
    			window.open('https://www.chewy.com/');
  		}

                function buy_book(book_id){
                         //make secure call with the jwt
                        secure_get_with_token("/secure_api/get_books", {"book_id" : book_id} , function(data){console.log("got books"); console.log(data)},
                                                function(err){ console.log(err) });
                }

	</script>
</html>

